{
  "info": {
    "name": "Sistema de Posts API",
    "description": "Colección de Postman para el sistema de gestión de posts. Incluye endpoints para CRUD de posts y estadísticas.",
    "version": "1.0.0",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Posts",
      "description": "Operaciones CRUD para posts",
      "item": [
        {
          "name": "Obtener todos los posts",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/posts",
              "host": ["{{baseUrl}}"],
              "path": ["api", "posts"],
              "query": [
                {
                  "key": "status",
                  "value": "published",
                  "description": "Filtrar por estado (published, draft, archived)",
                  "disabled": true
                },
                {
                  "key": "author",
                  "value": "Admin",
                  "description": "Filtrar por autor",
                  "disabled": true
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Número máximo de posts a retornar",
                  "disabled": true
                },
                {
                  "key": "offset",
                  "value": "0",
                  "description": "Número de posts a omitir (paginación)",
                  "disabled": true
                }
              ]
            },
            "description": "Obtiene una lista de todos los posts con opciones de filtrado y paginación"
          },
          "response": [
            {
              "name": "Éxito",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/posts",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "posts"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"success\": true,\n  \"data\": [\n    {\n      \"id\": \"1\",\n      \"title\": \"Bienvenido al Sistema de Posts\",\n      \"content\": \"Este es el primer post de ejemplo en nuestro sistema.\",\n      \"author\": \"Admin\",\n      \"createdAt\": \"2025-01-01T00:00:00.000Z\",\n      \"updatedAt\": \"2025-01-01T00:00:00.000Z\",\n      \"tags\": [\"bienvenida\", \"sistema\"],\n      \"status\": \"published\"\n    }\n  ],\n  \"total\": 1,\n  \"message\": \"Posts obtenidos exitosamente\"\n}"
            }
          ]
        },
        {
          "name": "Obtener post por ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/posts/:id",
              "host": ["{{baseUrl}}"],
              "path": ["api", "posts", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "1",
                  "description": "ID del post a obtener"
                }
              ]
            },
            "description": "Obtiene un post específico por su ID"
          },
          "response": [
            {
              "name": "Éxito",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/posts/1",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "posts", "1"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"success\": true,\n  \"data\": {\n    \"id\": \"1\",\n    \"title\": \"Bienvenido al Sistema de Posts\",\n    \"content\": \"Este es el primer post de ejemplo en nuestro sistema. Aquí puedes escribir todo el contenido que desees.\",\n    \"author\": \"Admin\",\n    \"createdAt\": \"2025-01-01T00:00:00.000Z\",\n    \"updatedAt\": \"2025-01-01T00:00:00.000Z\",\n    \"tags\": [\"bienvenida\", \"sistema\"],\n    \"status\": \"published\"\n  },\n  \"message\": \"Post obtenido exitosamente\"\n}"
            },
            {
              "name": "No encontrado",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/posts/999",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "posts", "999"]
                }
              },
              "status": "Not Found",
              "code": 404,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"success\": false,\n  \"error\": \"Post no encontrado\",\n  \"message\": \"El post con ID 999 no existe\"\n}"
            }
          ]
        },
        {
          "name": "Crear nuevo post",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Mi Nuevo Post\",\n  \"content\": \"Este es el contenido de mi nuevo post. Aquí puedo escribir toda la información que desee compartir.\",\n  \"author\": \"Usuario Demo\",\n  \"tags\": [\"demo\", \"tutorial\"],\n  \"status\": \"draft\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/posts",
              "host": ["{{baseUrl}}"],
              "path": ["api", "posts"]
            },
            "description": "Crea un nuevo post en el sistema"
          },
          "response": [
            {
              "name": "Creado exitosamente",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"title\": \"Mi Nuevo Post\",\n  \"content\": \"Este es el contenido de mi nuevo post.\",\n  \"author\": \"Usuario Demo\",\n  \"tags\": [\"demo\", \"tutorial\"],\n  \"status\": \"draft\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/posts",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "posts"]
                }
              },
              "status": "Created",
              "code": 201,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"success\": true,\n  \"data\": {\n    \"id\": \"2\",\n    \"title\": \"Mi Nuevo Post\",\n    \"content\": \"Este es el contenido de mi nuevo post.\",\n    \"author\": \"Usuario Demo\",\n    \"createdAt\": \"2025-01-02T10:30:00.000Z\",\n    \"updatedAt\": \"2025-01-02T10:30:00.000Z\",\n    \"tags\": [\"demo\", \"tutorial\"],\n    \"status\": \"draft\"\n  },\n  \"message\": \"Post creado exitosamente\"\n}"
            },
            {
              "name": "Error de validación",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"title\": \"\",\n  \"content\": \"Contenido sin título\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/posts",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "posts"]
                }
              },
              "status": "Bad Request",
              "code": 400,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"success\": false,\n  \"error\": \"Datos de entrada inválidos\",\n  \"message\": \"El título y el contenido son obligatorios\",\n  \"details\": {\n    \"title\": \"El título es obligatorio\",\n    \"author\": \"El autor es obligatorio\"\n  }\n}"
            }
          ]
        },
        {
          "name": "Actualizar post",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Mi Post Actualizado\",\n  \"content\": \"Este es el contenido actualizado de mi post.\",\n  \"author\": \"Usuario Demo\",\n  \"tags\": [\"actualizado\", \"modificado\"],\n  \"status\": \"published\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/posts/:id",
              "host": ["{{baseUrl}}"],
              "path": ["api", "posts", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "1",
                  "description": "ID del post a actualizar"
                }
              ]
            },
            "description": "Actualiza un post existente"
          },
          "response": [
            {
              "name": "Actualizado exitosamente",
              "originalRequest": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"title\": \"Mi Post Actualizado\",\n  \"content\": \"Contenido actualizado\",\n  \"status\": \"published\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/api/posts/1",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "posts", "1"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"success\": true,\n  \"data\": {\n    \"id\": \"1\",\n    \"title\": \"Mi Post Actualizado\",\n    \"content\": \"Contenido actualizado\",\n    \"author\": \"Admin\",\n    \"createdAt\": \"2025-01-01T00:00:00.000Z\",\n    \"updatedAt\": \"2025-01-02T11:00:00.000Z\",\n    \"tags\": [\"actualizado\", \"modificado\"],\n    \"status\": \"published\"\n  },\n  \"message\": \"Post actualizado exitosamente\"\n}"
            }
          ]
        },
        {
          "name": "Eliminar post",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/posts/:id",
              "host": ["{{baseUrl}}"],
              "path": ["api", "posts", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "1",
                  "description": "ID del post a eliminar"
                }
              ]
            },
            "description": "Elimina un post del sistema"
          },
          "response": [
            {
              "name": "Eliminado exitosamente",
              "originalRequest": {
                "method": "DELETE",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/posts/1",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "posts", "1"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"success\": true,\n  \"message\": \"Post eliminado exitosamente\"\n}"
            }
          ]
        }
      ]
    },
    {
      "name": "Estadísticas",
      "description": "Endpoints para obtener estadísticas del sistema",
      "item": [
        {
          "name": "Obtener estadísticas generales",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/stats",
              "host": ["{{baseUrl}}"],
              "path": ["api", "stats"]
            },
            "description": "Obtiene estadísticas generales del sistema de posts"
          },
          "response": [
            {
              "name": "Estadísticas obtenidas",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/stats",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "stats"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"success\": true,\n  \"data\": {\n    \"total\": 25,\n    \"published\": 18,\n    \"drafts\": 5,\n    \"archived\": 2,\n    \"totalViews\": 1542,\n    \"averageLength\": 287,\n    \"mostPopularTags\": [\n      {\n        \"tag\": \"tecnología\",\n        \"count\": 8\n      },\n      {\n        \"tag\": \"tutorial\",\n        \"count\": 6\n      },\n      {\n        \"tag\": \"programación\",\n        \"count\": 5\n      }\n    ]\n  },\n  \"message\": \"Estadísticas obtenidas exitosamente\"\n}"
            }
          ]
        },
        {
          "name": "Estadísticas por autor",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/stats/authors",
              "host": ["{{baseUrl}}"],
              "path": ["api", "stats", "authors"]
            },
            "description": "Obtiene estadísticas agrupadas por autor"
          },
          "response": [
            {
              "name": "Estadísticas por autor",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/stats/authors",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "stats", "authors"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"success\": true,\n  \"data\": [\n    {\n      \"author\": \"Admin\",\n      \"totalPosts\": 15,\n      \"publishedPosts\": 12,\n      \"draftPosts\": 3,\n      \"averageLength\": 320\n    },\n    {\n      \"author\": \"Moderador\",\n      \"totalPosts\": 10,\n      \"publishedPosts\": 6,\n      \"draftPosts\": 2,\n      \"averageLength\": 245\n    }\n  ],\n  \"message\": \"Estadísticas por autor obtenidas exitosamente\"\n}"
            }
          ]
        },
        {
          "name": "Estadísticas por período",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/stats/period?startDate=2025-01-01&endDate=2025-01-31",
              "host": ["{{baseUrl}}"],
              "path": ["api", "stats", "period"],
              "query": [
                {
                  "key": "startDate",
                  "value": "2025-01-01",
                  "description": "Fecha de inicio (YYYY-MM-DD)"
                },
                {
                  "key": "endDate",
                  "value": "2025-01-31",
                  "description": "Fecha de fin (YYYY-MM-DD)"
                }
              ]
            },
            "description": "Obtiene estadísticas para un período específico"
          },
          "response": [
            {
              "name": "Estadísticas por período",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/stats/period?startDate=2025-01-01&endDate=2025-01-31",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "stats", "period"],
                  "query": [
                    {
                      "key": "startDate",
                      "value": "2025-01-01"
                    },
                    {
                      "key": "endDate",
                      "value": "2025-01-31"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"success\": true,\n  \"data\": {\n    \"period\": {\n      \"startDate\": \"2025-01-01\",\n      \"endDate\": \"2025-01-31\"\n    },\n    \"postsCreated\": 8,\n    \"postsPublished\": 6,\n    \"dailyActivity\": [\n      {\n        \"date\": \"2025-01-01\",\n        \"posts\": 2\n      },\n      {\n        \"date\": \"2025-01-02\",\n        \"posts\": 1\n      }\n    ]\n  },\n  \"message\": \"Estadísticas del período obtenidas exitosamente\"\n}"
            }
          ]
        }
      ]
    },
    {
      "name": "Búsqueda y Filtros",
      "description": "Endpoints para búsqueda y filtrado de posts",
      "item": [
        {
          "name": "Buscar posts",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/posts/search?q=tutorial&tag=programación",
              "host": ["{{baseUrl}}"],
              "path": ["api", "posts", "search"],
              "query": [
                {
                  "key": "q",
                  "value": "tutorial",
                  "description": "Término de búsqueda en título y contenido"
                },
                {
                  "key": "tag",
                  "value": "programación",
                  "description": "Filtrar por tag específico"
                },
                {
                  "key": "author",
                  "value": "Admin",
                  "description": "Filtrar por autor",
                  "disabled": true
                },
                {
                  "key": "status",
                  "value": "published",
                  "description": "Filtrar por estado",
                  "disabled": true
                }
              ]
            },
            "description": "Busca posts utilizando diferentes criterios"
          },
          "response": [
            {
              "name": "Resultados de búsqueda",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/posts/search?q=tutorial",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "posts", "search"],
                  "query": [
                    {
                      "key": "q",
                      "value": "tutorial"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"success\": true,\n  \"data\": [\n    {\n      \"id\": \"2\",\n      \"title\": \"Tutorial de React\",\n      \"content\": \"En este tutorial aprenderás los conceptos básicos de React...\",\n      \"author\": \"Moderador\",\n      \"createdAt\": \"2025-01-02T00:00:00.000Z\",\n      \"updatedAt\": \"2025-01-02T00:00:00.000Z\",\n      \"tags\": [\"tutorial\", \"react\", \"programación\"],\n      \"status\": \"published\"\n    }\n  ],\n  \"total\": 1,\n  \"query\": \"tutorial\",\n  \"message\": \"Búsqueda completada exitosamente\"\n}"
            }
          ]
        },
        {
          "name": "Obtener todos los tags",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/tags",
              "host": ["{{baseUrl}}"],
              "path": ["api", "tags"]
            },
            "description": "Obtiene todos los tags disponibles en el sistema"
          },
          "response": [
            {
              "name": "Lista de tags",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/api/tags",
                  "host": ["{{baseUrl}}"],
                  "path": ["api", "tags"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"success\": true,\n  \"data\": [\n    {\n      \"tag\": \"programación\",\n      \"count\": 12\n    },\n    {\n      \"tag\": \"tutorial\",\n      \"count\": 8\n    },\n    {\n      \"tag\": \"react\",\n      \"count\": 5\n    },\n    {\n      \"tag\": \"javascript\",\n      \"count\": 7\n    }\n  ],\n  \"total\": 4,\n  \"message\": \"Tags obtenidos exitosamente\"\n}"
            }
          ]
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:5174",
      "description": "URL base del servidor de desarrollo React (Vite)"
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Script que se ejecuta antes de cada request",
          "console.log('Ejecutando request a:', pm.request.url.toString());"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Tests básicos para todas las respuestas",
          "pm.test('Status code is successful', function () {",
          "    pm.expect(pm.response.code).to.be.oneOf([200, 201, 204]);",
          "});",
          "",
          "pm.test('Response has success field', function () {",
          "    const responseJson = pm.response.json();",
          "    pm.expect(responseJson).to.have.property('success');",
          "});",
          "",
          "pm.test('Response time is less than 2000ms', function () {",
          "    pm.expect(pm.response.responseTime).to.be.below(2000);",
          "});"
        ]
      }
    }
  ]
}
